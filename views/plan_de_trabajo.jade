doctype html
html(ng-app="bibliolabs-viz" manifest="/cache.manifest" type="text/cache-manifest")
  head
    link(rel='stylesheet', href='/css/styles.css') 
    link(rel='stylesheet', href="/bower_components/bootstrap/dist/css/bootstrap.min.css" )
    script(src='/bower_components/angular/angular.min.js')
    script(src='/bower_components/angular-route/angular-route.min.js')
    script(src='/bower_components/angular-animate/angular-animate.min.js')
    script(src='/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js')
    script(src='/bower_components/x2js/xml2json.min.js')
    script(src='/js/app.js')
    //script(src='/js/d3.v3.min.js')

    title Sistema de Bibliotecas de Medell&iacute;n - Iniciativas 

  body
    div.page_wrapper.container
      div.content_wrapper.content
        header
            div.row(ng-controller="VisualizationCtrl")
              div.col-md-2
                img(src='/images/sbpm.png' alt="Sistema de Bibliotecas P&uacute;blicas de Medell&iacute;n")
              div.col-md-8
                //-div.visualization_links
                //-  a(ng-click="show_agenda()", ng-show="active_visualization=='initiatives'") Visualizar agenda
                //-  a(ng-click="show_initiatives()", ng-show="active_visualization=='agenda'") Visualizar iniciativas
              div.col-md-2
                a(href="/")
                  img.right(src='/images/bibliolabs.png' alt="Bibliolabs")


        
        //-div.title_bar
        //-  h1.top INICIATIVAS
        //-  h1.bottom BIBLIOTECAS
          
        div.main_content
         div.content
              div.panel.panel-success
                div.panel-heading
                  h1.panel-title.centered Plan de Trabajo
                div.panel-body
                  div.viz-intro
                    p.centered Las actividades de las bibliotecas del Sistema de Bibliotecas Públicas de Medellín (SBPM) en un lugar

          div.area_filtros.panel.panel-info
            div.panel-body
              div.col-md-3
                h4.right.inline Filtrar 
                  a.inline.small_text(ng-show="root.filter_active" ng-click="reset_filters()") Limpiar filtros 
              div.col-md-9.col-xs-3
               div.col-md-12.col-xs-3.filter_row
                div.filter-button-group.btn-group(dropdown)
                  button.filter-button(type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown") Por Biblioteca 
                    span.caret
                  ul.dropdown-menu(role="menu")
                   li(ng-repeat="bib in root.bibliotecas") 
                    a(ng-click="filter(id_campo.biblioteca, bib)") {{bib}}
                div.filter-label.label-success(ng-show="root.filter_items[id_campo.biblioteca]") 
                  div.filter-text {{root.filter_items[id_campo.biblioteca]}}
                  button.close(ng-click="reset_filter(id_campo.biblioteca)", type="button", data-dismiss="alert")
                    span(aria-hidden="true") &times;
                    span.sr-only Close

               div.col-md-6.col-xs-3
                div.filter-button-group.btn-group(dropdown)
                  button.filter-button(type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown") Por Público 
                    span.caret
                  ul.dropdown-menu(role="menu")
                    li(ng-repeat="pub in root.publicos") 
                      a(ng-click="filter(id_campo.publicos, pub)") {{pub}}
                div.filter-label.label-success(ng-show="root.filter_items[id_campo.publicos]") 
                  div.filter-text {{root.filter_items[id_campo.publicos]}}
                  button.close(ng-click="reset_filter(id_campo.publicos)", type="button", data-dismiss="alert")
                    span(aria-hidden="true") &times;
                    span.sr-only Close

               div.col-md-6.col-xs-3
                div.filter-button-group.btn-group(dropdown)
                  button.filter-button(type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown") Por Categoría 
                    span.caret
                  ul.dropdown-menu(role="menu")
                    li(ng-repeat="cat in root.categorias") 
                      a(ng-click="filter(id_campo.categoria, cat)") {{cat}}
                div.filter-label.label-success(ng-show="root.filter_items[id_campo.categoria]") 
                  div.filter-text {{root.filter_items[id_ampo.categoria]}}
                  button.close(ng-click="reset_filter(id_campo.categoria)", type="button", data-dismiss="alert")
                    span(aria-hidden="true") &times;
                    span.sr-only Close

          div#lista_actividades(ng-controller="PdtCtrl")
            div.col-md-12.col-xs-12(ng-show="root.no_results") 
              div.alert.alert-warning.centered(role="alert") No hay actividades que corresponden a tu selección de filtros!

            each actividad in actividades
              div.item_row
                div.col-md-2.col-xs-2
                  div.activity_image 
                    if actividad[id_campo.imagen] !== undefined
                      img(src= actividad[id_campo.imagen])
                    else
                      img(src= "/images/placeholder.png", width="150px")
                div.col-md-6.col-xs-4
                  div.publico_icon
                  div.category_item
                  div.actividad
                    div.activity_title(ng-click="show_detail('#{actividad[id_campo.actividad].identificador}')")= actividad[id_campo.actividad].contenido
                    div.desc= actividad[id_campo.descripcion].contenido
                    div.categoria= actividad[id_campo.categoria].contenido
                    if actividad[id_campo.cat_espacios] !== undefined
                      div.categoria= actividad[id_campo.cat_espacios].contenido
                div.actions.col-md-4.col-xs-6
                  div.action_row.col-md-12
                    div.action.see(ng-click="show_detail('#{actividad[id_campo.actividad].identificador}')") 
                            //span.right {{iniciativa['Categoria'].contenido }}
                          //-span.glyphicon.glyphicon-comment.left
                          //-span.glyphicon.glyphicon-thumbs-up.right
                    div.action.stats(ng-click="stats('#{actividad[id_campo.actividad].identificador}')") 
                    div.action.novelty(ng-click="novelty('#{actividad[id_campo.actividad].identificador}')")
                    div.action.plan(ng-click="plan('#{actividad[id_campo.actividad].identificador}')") 
                  div.action_row.col-md-12
                    div.action.docs(ng-click="docs('#{actividad[id_campo.actividad].identificador}')") 
                    div.action.transparent
                    div.action.transparent
                    div.action.evaluate(ng-click="evaluate('#{actividad[id_campo.actividad].identificador}')") 

